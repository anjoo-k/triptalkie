<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.walkietalkie.triptalkie.mapper.BookMarkMapper">

	<!--북마크 추가 -->
	<insert id="insertBookmark">
		INSERT INTO bookmark (member_id, makemate_idx)
		VALUES
		(#{memberId},#{makemateIdx})
	</insert>

	<!--북마크 여부 조회 -->
	<select id="existBookmark" resultType="java.lang.Integer">
		select state
		from
		bookmark
		where member_id=#{memberId}
		and mekemate_idx= #{makemateIdx}
	</select>
	<!--북마크 삭제 -->
	<delete id="deleteBookmark">
		DELETE FROM bookmark
		WHERE member_id = #{memberId}
		AND makemate_idx = #{makemateIdx}

	</delete>

	<!--북마크 리스트 조회 -->
	<select id="findBookmarksWithMakemate"
		resultType="com.walkietalkie.triptalkie.domain.Makemate">
		SELECT m.*
		FROM bookmark b
		JOIN makemate m ON b.makemate_idx = m.idx
		WHERE b.member_id = #{memberId}
	</select>
	
	<!-- 북마크 상태 업데이트 -->
    <update id="updateBookmarkState">
        UPDATE bookmark
        SET state = #{state}
        WHERE member_id = #{memberId}
          AND makemate_idx = #{makemateIdx}
    </update>

</mapper>