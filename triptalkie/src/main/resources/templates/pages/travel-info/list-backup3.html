<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/base}">

<main layout:fragment="content">
	<h4 class="text-center content--title">여행 정보 게시판</h4>

	<div class="travel-info-containers bg--containers pt-5 pb-5">
		<!-- 검색 폼 -->
		<div class="form-container mb-3">
			<form th:action="@{/travel-info/list}" method="get">
				<div class="form-group row">
					<div class="col-sm-10">
						<input type="text" name="keyword" class="form-control search-box"
							placeholder="무엇을 찾아볼까요?" th:value="${keyword}">
					</div>
					<div class="col-sm-2">
						<button type="submit" class="btn btn-block btn-search">검색</button>
					</div>
				</div>

				<!-- 카테고리 필터 -->
				<div class="form-group row">
					<div class="col-md">
						<select class="form-control select-box" name="infotype">
							<option value="">정보 종류</option>
							<option th:each="type : ${infoTypeList}" th:value="${type}"
								th:text="${type}"></option>
						</select>
					</div>
				</div>
			</form>
		</div>

		<div class="board-divider mx-4 px-2"></div>

		<!-- 리스트 -->
		<div class="info-list-container mt-4 mx-4">
			<div th:if="${travelInfoList != null}"
				th:each="info, stat : ${travelInfoList}">
				<div class="card mb-3">
					<div class="card-body card-body-grid d-flex align-items-center">
						<!-- 글 번호 -->
						<div class="number mr-3" th:text="${stat.count}">1</div>

						<!-- 카드 내용 -->
						<div class="right-content flex-fill">
							<div class="row-badges mb-1">
								<span class="badge badge--category" th:text="{info.cityName}">지역</span>
								<span class="badge--sub-desc" th:text="|조회수 · ${info.view}|">조회수</span>
								<span class="badge--sub-desc"
									th:text="${info.member != null ? info.memberNickname : '작성자 없음'}">작성자</span>
							</div>

							<div class="row-stats mb-1">
								<a th:href="@{/travel-info/detail/{idx}(idx=${info.idx})}"
									class="card-title h5 mb-1 title list-title"
									th:data-id="${info.idx}" th:text="${info.title}">글 제목</a> <span
									class="badge--sub-desc"
									th:text="${info.infodate != null ? #temporals.format(info.infodate, 'yyyy-MM') : ''}">여행정보기준일</span>
							</div>
						</div>
					</div>
				</div>

				<!-- 카드 사이 구분선 -->
				<div class="card-divider" th:if="${!stat.last}"></div>
			</div>

			<!-- 리스트 비어있을 때 -->
			<div
				th:if="${travelInfoList == null or #lists.isEmpty(travelInfoList)}"
				class="text-center p-3">검색 결과가 없습니다.</div>
		</div>

		<!-- 페이지네이션 + 글쓰기 버튼 -->
		<div class="row mb-3 mt-4">
			<div
				class="col d-flex justify-content-center align-items-center mt-1">
				<a class="btn btn-write" th:href="@{/travel-info/register}">글쓰기</a>
			</div>
		</div>
	</div>
</main>
</html>
