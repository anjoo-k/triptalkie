<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/base}">

<main layout:fragment="content">
	<h4 class="text-center content--title">우리끼리 터놓는 메이트 톡</h4>

	<div class="pt-3 pb-3">

		<!-- 🔎 검색 영역 -->
		<div class="form-container">
			<form th:action="@{/community/list}" method="get">
				<div class="form-group row">
					<div class="col-sm-10">
						<input type="text" class="form-control" name="search"
							placeholder="검색어를 입력해 주세요." th:value="${search}">
					</div>
					<div class="col-sm-2">
						<button type="submit" class="btn btn-block btn-search">검색</button>
					</div>
				</div>
			</form>
		</div>

		<!-- 📋 게시판 리스트 -->
		<div class="board-divider mx-4 px-2"></div>

		<div class="review-list-container mt-4 mx-4">
			<table class="table table-hover align-middle">
				<thead class="table-light">
					<tr>
						<th style="width: 100px;">번호</th>
						<th style="width: 300px">글제목</th>
						<th style="width: 150px;">닉네임</th>
						<th style="width: 80px;">조회수</th>
						<th style="width: 150px;">작성일</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="post, stat : ${communityList}">
						<td th:text="${stat.count}">번호</td>
						<td><a style="color: var(--color-text-primary);"
							th:href="@{/community/detail-community/{idx}(idx=${post.idx})}"
							th:text="${post.title}">글 제목</a></td>
						<td th:text="${post.memberNickname}">작성자 닉네임</td>
						<td th:text="${post.view}">조회수</td>
						<td th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">2025-08-19</td>
					</tr>
				</tbody>
			</table>
		</div>

		<!-- 페이지네이션, 글쓰기 버튼 -->
		<div class="d-flex justify-content-between align-items-center mb-3">

			<!-- 왼쪽 빈 영역 (페이지네이션 가운데를 위해 flex-grow 사용) -->
			<div class="flex-grow-1 text-center"
				th:if="${pageData.totalPage > 0}">
				<nav class="p-2 pagination--bottom">
					<ul class="pagination justify-content-center mb-0">

						<!-- 처음으로 -->
						<li
							th:classappend="${pageData.currentPage == 1} ? 'disabled' : ''"
							class="page-item pagination--spacing"><a class="page-link"
							th:href="@{/community/list(page=1, search=${search})}">&laquo;</a>
						</li>

						<!-- 이전 -->
						<li
							th:classappend="${pageData.currentPage == 1} ? 'disabled' : ''"
							class="page-item pagination--spacing"><a class="page-link"
							th:href="@{/community/list(page=${pageData.currentPage > 1 ? pageData.currentPage - 1 : 1}, search=${search})}">&lt;</a>
						</li>

						<!-- 페이지 번호 반복 -->
						<li
							th:each="i : ${#numbers.sequence(pageData.startPage, pageData.endPage)}"
							th:classappend="${i == pageData.currentPage} ? 'active' : ''"
							class="page-item pagination--spacing"><a class="page-link"
							th:href="@{/community/list(page=${i}, search=${search})}"
							th:text="${i}">1</a></li>

						<!-- 다음 -->
						<li
							th:classappend="${pageData.currentPage == pageData.totalPage} ? 'disabled' : ''"
							class="page-item pagination--spacing"><a class="page-link"
							th:href="@{/community/list(page=${pageData.currentPage < pageData.totalPage ? pageData.currentPage + 1 : pageData.totalPage}, search=${search})}">&gt;</a>
						</li>

						<!-- 마지막 -->
						<li
							th:classappend="${pageData.currentPage == pageData.totalPage} ? 'disabled' : ''"
							class="page-item pagination--spacing"><a class="page-link"
							th:href="@{/community/list(page=${pageData.totalPage}, search=${search})}">&raquo;</a>
						</li>
					</ul>
				</nav>
			</div>

			<!-- 검색 결과 없을 때 메시지 -->
			<div th:if="${pageData.totalPage == 0}" class="col-6 text-center p-3">
				검색 결과가 없습니다.</div>

			<!-- 오른쪽 글쓰기 버튼 -->
			<div class="text-end">
				<a class="btn btn-write" th:href="@{/community/register}"> <svg
						xmlns="http://www.w3.org/2000/svg" width="16" height="16"
						fill="currentColor" class="bi bi-pencil-square"
						viewBox="0 0 16 16">
			            <path
							d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"></path>
			            <path fill-rule="evenodd"
							d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"></path>
			        </svg>
				</a>
			</div>
		</div>
	</div>
</main>
</html>






